# 在庫管理アプリケーション開発計画書

## 1. プロジェクトの現状 (2025/10/14時点)

`ZAIKO.txt`の初期構想に基づき、アプリケーションのコア機能開発と、よりスケーラブルなシステムへのアーキテクチャ刷新が完了しました。

*   **コア機能:** 認証、在庫管理、使用履歴、マスターデータ管理など、要件定義の主要機能はすべて実装済みです。
*   **新アーキテクチャ:**
    *   **データベース:** ローカルのSQLiteから、クラウドベースの**Supabase (PostgreSQL)** へ完全に移行しました。これにより、データの永続性と拡張性が大幅に向上しました。
    *   **マルチテナント対応:** システムは「システム管理者」「部品商」「整備工場」の3つの役割（ロール）を明確に区別するマルチテナントアーキテクチャに刷新されました。各ユーザーは、自身の権限に応じたデータのみにアクセスできます。
*   **インフラ:** Raspberry Pi + Dockerによるポータブルなサーバー実行環境が確立されています。
*   **CI/CD:** GitHub Actionsによる自動テストは引き続き有効です。

---

## 2. 機能開発の達成状況

今回のアーキテクチャ刷新に伴い、当初計画された機能は、新しいデータモデルの基で達成されました。

**【A】認証と権限管理**
*   **[済] 3ロール対応認証:** 管理者、部品商、整備工場の3つの異なるログインエンドポイントを実装し、役割に応じたセッション管理を実現しました。

**【B】データ管理と運用**
*   **[済] データの階層的管理:**
    *   管理者は、複数の部品商を管理できます。
    *   部品商は、自身に紐づく複数の整備工場、従業員、部品マスタを管理できます。
    *   整備工場は、自店の在庫と従業員のみを管理します。
    *   これにより、データの独立性とセキュリティが確保されています。
*   **[済] CSVインポート・エクスポート:** 各役割が必要とするデータ（部品マスタ、在庫データ等）のCSV入出力に対応済みです。
*   **[済] 発注・棚卸し機能:** 発注リストの作成や棚卸しによる在庫調整など、高度な在庫管理機能も新アーキテクチャに対応済みです。

**【C】未着手だが、新アーキテクチャで実現可能な機能**
*   **[未着手] 部品画像の登録・表示:** 部品に画像を紐づけて、画面で確認できるようにする。
*   **[未着手] AI機能の活用:** 将来的にGemini APIなどを活用した機能を追加する。

---

## 3. 今後の開発計画（案）

安定かつスケーラブルな基盤が整ったため、今後はアプリケーションをよりリッチにするための機能開発を提案します。

### **フェーズ4: リッチコンテンツと付加価値機能**
*   **部品画像の登録・表示機能:**
    *   部品マスタに画像アップロード機能を追加します。
    *   在庫一覧や部品使用画面でサムネイルを表示し、部品の誤選択を防ぎます。

*   **ダッシュボード機能の強化:**
    *   管理者や部品商向けに、グラフなどを用いて複数店舗の在庫状況や部品の使用頻度を視覚的に表示するダッシュボードを作成します。

*   **AI機能の活用検討:**
    *   **使用量予測:** 過去の使用履歴データを基に、将来の部品使用量を予測し、より高度な発注管理を実現します。
    *   **自然言語での在庫検索:** 「A工場のオイルフィルターの在庫は？」といった自然な文章で在庫を問い合わせできるインターフェースを検討します。