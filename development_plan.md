# 在庫管理アプリケーション開発計画書

## 1. 現状のアプリケーション概要 (2025/10/09時点)

`ZAIKO.txt` の基本機能に加え、以下の機能が実装されています。

*   **認証機能:**
    *   `express-session`, `cookie-parser`, `bcrypt` を利用したログイン機能。
    *   `users` テーブルによるユーザー管理（管理者/整備工場ユーザーのロール）。
    *   ロールに基づいたアクセス制御。
*   **データ構造:**
    *   複数工場に対応するため、DBが正規化されている（`shops`, `parts`, `inventories`, `users` テーブルなど）。
*   **管理者向け機能 (`admin.html`):**
    *   工場、部品、ユーザーのCRUD（作成、読み取り、更新、削除）機能。
    *   全工場の在庫管理機能。
    *   詳細な使用履歴レポート機能。
*   **整備工場ユーザー向け機能 (`index.html`):**
    *   所属工場の在庫確認と使用記録。
    *   月ごとの使用履歴の確認。

---

## 2. 今後の開発計画

ユーザー様からのご要望に基づき、在庫管理アプリケーションの機能追加を以下の計画で進めます。

### **ご要望の整理**

**【A】UI/UX（使いやすさ）の改善**
1.  **管理者画面のフィルタリング強化:** 在庫管理画面で、工場別・部品別に在庫状況を絞り込めるようにする。
2.  **部品のカテゴリー分け:** 部品をカテゴリーで分類し、特に整備工場画面での検索性を向上させる。
3.  **整備士名の必須化と確認:** 部品使用時に整備士名の入力を必須にし、使用ボタン押下時に確認メッセージを表示する。

**【B】データ管理と運用**
4.  **部品使用の修正機能:** 間違えて記録した使用履歴を修正し、その修正履歴も記録する。
5.  **CSVインポート・エクスポート:** 部品マスタや在庫データなどをCSVで一括登録・出力できるようにする。
6.  **サンプルデータの拡充:** 車検でよく使われる部品のサンプルデータを100件程度用意する。

**【C】新機能の追加**
7.  **発注管理機能:** 発注が必要な部品のリストアップやアラート機能。
8.  **棚卸し機能:** 定期的な棚卸しをサポートする機能。
9.  **部品画像の登録・表示:** 部品に画像を紐づけて、画面で確認できるようにする。

**【D】将来的な拡張**
10. **AI機能の活用:** 将来的にGemini APIなどを活用した機能を追加する。

---

### **開発計画のご提案**

**【フェーズ1: 基本的な利便性の向上】(最優先)**
1.  **管理者画面の在庫フィルタリング機能の実装:**
    *   在庫管理画面に「工場」と「部品」のドロップダウンリストを追加し、表示を絞り込めるようにします。
2.  **部品カテゴリー機能の導入（まずはデータベースから）:**
    *   部品を分類するための「カテゴリー」という概念を導入します。
    *   データベースに`categories`テーブルを追加し、`parts`テーブルと関連付けます。
3.  **整備工場画面の改善:**
    *   部品使用時の「整備士名」を、手入力ではなく登録済みのリストから選択する方式に変更し、選択を必須にします。（まずは`mechanic_name`の入力チェック強化から着手します）
    *   「使用」ボタンを押した際に、「本当にこの部品を使用しますか？」といった確認ダイアログを表示するようにします。

**【フェーズ2: データ管理と運用の効率化】**
*   部品カテゴリー機能のUIへの反映
*   CSVインポート・エクスポート機能
*   サンプルデータの拡充

**【フェーズ3: 応用機能の実装】**
*   部品使用の修正機能（修正履歴を含む）
*   発注管理機能
*   棚卸し機能

**【フェーズ4: リッチコンテンツと将来的な拡張】**
*   部品画像の登録・表示機能
*   AI機能の活用検討

---